<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Cart</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

<nav class="navbar navbar-dark bg-dark">
    <div class="container">
        <a class="navbar-brand" href="index.html">My Store</a>
        <span class="btn btn-light">ðŸ›’ Cart</span>
    </div>
</nav>

<div class="container mt-4">
    <h2>Your Cart</h2>
    <div id="cart-items"></div>

    <h4 class="mt-3">Total: â‚¹<span id="total">0</span></h4>

    <button class="btn btn-success mt-3" onclick="proceed()">Proceed to Checkout</button>
    <button class="btn btn-danger mt-3" onclick="clearCart()">Clear Cart</button>
</div>

<script>
    const products = [
        { id: 1, name: "Smartwatch", price: 2999 },
        { id: 2, name: "Wireless Earbuds", price: 1499 },
        { id: 3, name: "Bluetooth Speaker", price: 1999 }
    ];

    function loadCart() {
        let cart = JSON.parse(localStorage.getItem("cart")) || [];
        let container = document.getElementById("cart-items");

        if (cart.length === 0) {
            container.innerHTML = "<p>Your cart is empty.</p>";
            return;
        }

        container.innerHTML = ""; 
        let total = 0;

        cart.forEach(item => {
            let p = products.find(x => x.id === item.id);
            let subtotal = p.price * item.qty;
            total += subtotal;

            container.innerHTML += `
                <div class="card p-3 mb-2">
                    <h5>${p.name}</h5>
                    <p>Price: â‚¹${p.price}</p>
                    <p>Quantity:
                        <button class="btn btn-sm btn-secondary" onclick="decrease(${p.id})">-</button>
                        ${item.qty}
                        <button class="btn btn-sm btn-secondary" onclick="increase(${p.id})">+</button>
                    </p>
                    <p>Subtotal: â‚¹${subtotal}</p>
                </div>
            `;
        });

        document.getElementById("total").textContent = total;
    }

    function increase(id) {
        let cart = JSON.parse(localStorage.getItem("cart")) || [];
        let index = cart.findIndex(i => i.id === id);
        cart[index].qty++;
        localStorage.setItem("cart", JSON.stringify(cart));
        loadCart();
    }

    function decrease(id) {
        let cart = JSON.parse(localStorage.getItem("cart")) || [];
        let index = cart.findIndex(i => i.id === id);

        if (cart[index].qty > 1) {
            cart[index].qty--;
        } else {
            cart.splice(index, 1);
        }

        localStorage.setItem("cart", JSON.stringify(cart));
        loadCart();
    }

    function clearCart() {
        localStorage.removeItem("cart");
        loadCart();
    }

    function proceed() {
        window.location.href = "checkout.html";
    }

    loadCart();
</script>

</body>
</html>